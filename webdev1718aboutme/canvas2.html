<!DOCTYPE html>
<html>
  
<head>
    <title>Simple Canvas Example</title>
    <style>
        canvas {
            border: 3px #CCC solid;
        }
    </style>
</head>
 
    <body>
        <div id="container">
            <canvas id="myCanvas" height="450" width="450"></canvas>
        </div>
        <script>
            var mainCanvas = document.getElementById("myCanvas");
            var mainContext = mainCanvas.getContext('2d');
             
            var canvasWidth = mainCanvas.width;
            var canvasHeight = mainCanvas.height;
             
            var angle = 0;
            var color='green'
            var requestAnimationFrame = window.requestAnimationFrame || 
                                        window.mozRequestAnimationFrame || 
                                        window.webkitRequestAnimationFrame || 
                                        window.msRequestAnimationFrame;
             
            function drawCircle() {
                console.log('run');
                mainContext.clearRect(0, 0, canvasWidth, canvasHeight);
                 
                // color in the background
                mainContext.fillStyle = "#EEEEEE";
                mainContext.fillRect(0, 0, canvasWidth, canvasHeight);
                 
                // draw the circle
                mainContext.beginPath();
                 
                var radius = 25 + 150 * Math.abs(Math.cos(angle));
                mainContext.arc(225, 225, 175, 0, angle, false);
                mainContext.closePath();
                 
                // color in the circle
                if(Math.cos(angle)==1){
                    color='#' + Math.random().toString(16).slice(2, 8).toUpperCase();
                    console.log("1");
                    angle=0;
                }
                mainContext.fillStyle=color;
                mainContext.fill();
                  
                angle += Math.PI*2 / 180;
                 
                requestAnimationFrame(drawCircle);
            }
            drawCircle();
            
        </script>
    </body>
</html>
